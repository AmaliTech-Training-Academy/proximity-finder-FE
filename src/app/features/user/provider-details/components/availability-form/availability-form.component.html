<div class="container">
  <header>
    <div class="col">
      <p>17 open slots</p>
      <p class="text">in the next week</p>
    </div>
  </header>
  
    <form [formGroup]="availabilityForm" (ngSubmit)="onSubmit()">
        <div class="input">
            <label for="date">Scheduling Date</label>
            <app-password-input type="date" id="date" formControlName="schedulingDate"
            [error]="availabilityForm.get('schedulingDate')?.invalid &&(availabilityForm.get('schedulingDate')?.dirty || availabilityForm.get('schedulingDate')?.touched)"
            />
            @if (availabilityForm.get('schedulingDate')?.invalid &&(availabilityForm.get('schedulingDate')?.dirty || availabilityForm.get('schedulingDate')?.touched)) {
                @if (availabilityForm.get('schedulingDate')?.hasError('required')) {
                    <small class="error">Scheduling date is required</small>
                }
            }          
        </div>

        <div class="input">
            <label for="hours">Estimated Hours</label>
            <app-password-input type="number"
            placeholder="Please enter the value" id="hours" formControlName="estimatedHours"
            [error]="availabilityForm.get('estimatedHours')?.invalid &&(availabilityForm.get('estimatedHours')?.dirty || availabilityForm.get('estimatedHours')?.touched)"
            />
            @if (availabilityForm.get('estimatedHours')?.invalid &&(availabilityForm.get('estimatedHours')?.dirty || availabilityForm.get('estimatedHours')?.touched)) {
                @if (availabilityForm.get('estimatedHours')?.hasError('required')) {
                    <small class="error">Estimated hours are required</small>
                }
                @if (availabilityForm.get('estimatedHours')?.hasError('min')) {
                    <small class="error"> Estimated hours must be at least 1.</small>
                }
            }
        </div>

        <button type="submit" [disabled]="availabilityForm.invalid">Check Availability</button>
    </form>

  @if (!isProAvailable) {
  <div class="no-pro">
    <p>Sorry, this pro can’t do your job, let’s get you a pro.</p>
    <a>Check out for others</a>
  </div>
  }
  <div class="pro-available">
    <p-button (click)="showDialog()" label="Book Now" />
  </div>
  <p-dialog
    header="Book Service"
    [modal]="true"
    [(visible)]="visible"
    [draggable]="false"
    [resizable]="false"
    [autofocus]="false"
    [style]="{ width: '44rem' }"
  >
    <app-booking-form
      [providerEmail]="providerEmail"
      (closeDialogEvent)="onCloseDialogClicked($event)"
    />
  </p-dialog>
</div>
