<div class="container">

    <div class="password-container">
        <form [formGroup]="changePasswordForm" (ngSubmit)="onSubmit()">
            <div class="input-group">
                <!-- old password -->
                <div class="input-field">
                    <label for="old-password">Old Password</label>

                    <div class="input-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="20" viewBox="0 0 16 20" fill="none">
                            <path d="M13.4679 6.89313H12.5758V5.10893C12.5758 2.64674 10.5775 0.648438 8.11531 0.648438C5.65312 0.648438 3.65481 2.64674 3.65481 5.10893V6.89313H2.76271C1.7814 6.89313 0.978516 7.69602 0.978516 8.67733V17.5983C0.978516 18.5796 1.7814 19.3825 2.76271 19.3825H13.4679C14.4492 19.3825 15.2521 18.5796 15.2521 17.5983V8.67733C15.2521 7.69602 14.4492 6.89313 13.4679 6.89313ZM5.43901 5.10893C5.43901 3.62805 6.63443 2.43264 8.11531 2.43264C9.59619 2.43264 10.7916 3.62805 10.7916 5.10893V6.89313H5.43901V5.10893ZM13.4679 17.5983H2.76271V8.67733H13.4679V17.5983ZM8.11531 14.922C9.09662 14.922 9.89951 14.1191 9.89951 13.1378C9.89951 12.1565 9.09662 11.3536 8.11531 11.3536C7.134 11.3536 6.33111 12.1565 6.33111 13.1378C6.33111 14.1191 7.134 14.922 8.11531 14.922Z" fill="#78909C"/>
                        </svg>


                        <input type="password" name="old-password" id="old-password"
                         formControlName="oldPassword"
                         placeholder="Old Password"
                         autocomplete="current-password"
                         [type]="oldPasswordVisible ? 'text': 'password'"
                        >

                        
                        @if (oldPasswordVisible) {
                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none" (click)="togglePasswordVisibility('oldPassword')">
                                <path d="M10.7048 3.79138C4.01414 3.79138 1.33789 10.705 1.33789 10.705C1.33789 10.705 4.01414 17.6187 10.7048 17.6187C17.3954 17.6187 20.0716 10.705 20.0716 10.705C20.0716 10.705 17.3954 3.79138 10.7048 3.79138Z" stroke="#252C32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M10.7051 13.3812C12.1831 13.3812 13.3813 12.183 13.3813 10.705C13.3813 9.22695 12.1831 8.02875 10.7051 8.02875C9.22701 8.02875 8.02881 9.22695 8.02881 10.705C8.02881 12.183 9.22701 13.3812 10.7051 13.3812Z" stroke="#252C32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        }
                        @else {
                            <!-- svg -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none" (click)="togglePasswordVisibility('oldPassword')">
                                <path d="M4.30078 4.24023L17.4258 18.6777" stroke="black" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M13.0696 13.8875C12.4674 14.4391 11.6796 14.7437 10.8629 14.7406C10.2007 14.7406 9.55392 14.5401 9.00772 14.1656C8.46151 13.791 8.04142 13.26 7.80267 12.6423C7.56392 12.0245 7.51768 11.349 7.67004 10.7045C7.8224 10.06 8.16621 9.4767 8.65629 9.03125" stroke="black" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M6.43359 6.58594C3.08672 8.27578 1.67578 11.4586 1.67578 11.4586C1.67578 11.4586 4.30078 17.3648 10.8633 17.3648C12.401 17.3774 13.9196 17.023 15.293 16.3312" stroke="black" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M17.4758 14.8305C19.2641 13.2309 20.0516 11.459 20.0516 11.459C20.0516 11.459 17.4266 5.55275 10.8641 5.55275C10.2951 5.55163 9.72713 5.59828 9.16602 5.69221" stroke="black" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M11.4785 8.23438C12.1763 8.36659 12.8122 8.72219 13.2901 9.2475C13.7681 9.77281 14.0622 10.4393 14.1281 11.1465" stroke="black" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        }
                    </div>

                    @if (changePasswordForm.get('oldPassword')?.invalid && 
                    (changePasswordForm.get('oldPassword')?.touched || 
                     changePasswordForm.get('oldPassword')?.dirty)) {
                        @if (changePasswordForm.get('oldPassword')?.hasError('required') ||
                        changePasswordForm.get('oldPassword')?.hasError('sameAsNewPassword')) {
                            <small class="error">Old password is required</small>
                        }
                     }
                </div>
    
                <!-- new password -->
                <div class="input-field">
                    <label for="new-password">New Password</label>

                    <div class="input-item">
                        <!-- icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="20" viewBox="0 0 16 20" fill="none">
                            <path d="M13.4679 6.89313H12.5758V5.10893C12.5758 2.64674 10.5775 0.648438 8.11531 0.648438C5.65312 0.648438 3.65481 2.64674 3.65481 5.10893V6.89313H2.76271C1.7814 6.89313 0.978516 7.69602 0.978516 8.67733V17.5983C0.978516 18.5796 1.7814 19.3825 2.76271 19.3825H13.4679C14.4492 19.3825 15.2521 18.5796 15.2521 17.5983V8.67733C15.2521 7.69602 14.4492 6.89313 13.4679 6.89313ZM5.43901 5.10893C5.43901 3.62805 6.63443 2.43264 8.11531 2.43264C9.59619 2.43264 10.7916 3.62805 10.7916 5.10893V6.89313H5.43901V5.10893ZM13.4679 17.5983H2.76271V8.67733H13.4679V17.5983ZM8.11531 14.922C9.09662 14.922 9.89951 14.1191 9.89951 13.1378C9.89951 12.1565 9.09662 11.3536 8.11531 11.3536C7.134 11.3536 6.33111 12.1565 6.33111 13.1378C6.33111 14.1191 7.134 14.922 8.11531 14.922Z" fill="#78909C"/>
                        </svg>

                        <input type="password" name="new-password" id="new-password"
                         formControlName="newPassword"
                         placeholder="New Password"
                         autocomplete="new-password"
                         [type]="newPasswordVisible ? 'text': 'password'">

                        <!-- svg -->
                        
                        @if (newPasswordVisible) {
                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none" (click)="togglePasswordVisibility('newPassword')">
                                <path d="M10.7048 3.79138C4.01414 3.79138 1.33789 10.705 1.33789 10.705C1.33789 10.705 4.01414 17.6187 10.7048 17.6187C17.3954 17.6187 20.0716 10.705 20.0716 10.705C20.0716 10.705 17.3954 3.79138 10.7048 3.79138Z" stroke="#252C32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M10.7051 13.3812C12.1831 13.3812 13.3813 12.183 13.3813 10.705C13.3813 9.22695 12.1831 8.02875 10.7051 8.02875C9.22701 8.02875 8.02881 9.22695 8.02881 10.705C8.02881 12.183 9.22701 13.3812 10.7051 13.3812Z" stroke="#252C32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        }
                        @else {
                            <!-- svg -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none" (click)="togglePasswordVisibility('newPassword')">
                                <path d="M4.30078 4.24023L17.4258 18.6777" stroke="black" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M13.0696 13.8875C12.4674 14.4391 11.6796 14.7437 10.8629 14.7406C10.2007 14.7406 9.55392 14.5401 9.00772 14.1656C8.46151 13.791 8.04142 13.26 7.80267 12.6423C7.56392 12.0245 7.51768 11.349 7.67004 10.7045C7.8224 10.06 8.16621 9.4767 8.65629 9.03125" stroke="black" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M6.43359 6.58594C3.08672 8.27578 1.67578 11.4586 1.67578 11.4586C1.67578 11.4586 4.30078 17.3648 10.8633 17.3648C12.401 17.3774 13.9196 17.023 15.293 16.3312" stroke="black" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M17.4758 14.8305C19.2641 13.2309 20.0516 11.459 20.0516 11.459C20.0516 11.459 17.4266 5.55275 10.8641 5.55275C10.2951 5.55163 9.72713 5.59828 9.16602 5.69221" stroke="black" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M11.4785 8.23438C12.1763 8.36659 12.8122 8.72219 13.2901 9.2475C13.7681 9.77281 14.0622 10.4393 14.1281 11.1465" stroke="black" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        }
                    </div>

                    @if (changePasswordForm.get('newPassword')?.invalid &&
                        (changePasswordForm.get('newPassword')?.touched || 
                        changePasswordForm.get('newPassword')?.dirty)) {
                            @if (changePasswordForm.get('newPassword')?.errors?.['minlength'] || 
                            changePasswordForm.get('newPassword')?.errors?.['invalidPassword']) {
                                <small class="error">Password must be at least 12 characters including uppercase, lowercase, number and special character</small>
                            }
                        }
                </div>
    
                <!-- confirm password -->
                <div class="input-field">
                    <label for="confirm-password">Confirm Password</label>

                    <div class="input-item">
                        <!-- icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="20" viewBox="0 0 16 20" fill="none">
                            <path d="M13.4679 6.89313H12.5758V5.10893C12.5758 2.64674 10.5775 0.648438 8.11531 0.648438C5.65312 0.648438 3.65481 2.64674 3.65481 5.10893V6.89313H2.76271C1.7814 6.89313 0.978516 7.69602 0.978516 8.67733V17.5983C0.978516 18.5796 1.7814 19.3825 2.76271 19.3825H13.4679C14.4492 19.3825 15.2521 18.5796 15.2521 17.5983V8.67733C15.2521 7.69602 14.4492 6.89313 13.4679 6.89313ZM5.43901 5.10893C5.43901 3.62805 6.63443 2.43264 8.11531 2.43264C9.59619 2.43264 10.7916 3.62805 10.7916 5.10893V6.89313H5.43901V5.10893ZM13.4679 17.5983H2.76271V8.67733H13.4679V17.5983ZM8.11531 14.922C9.09662 14.922 9.89951 14.1191 9.89951 13.1378C9.89951 12.1565 9.09662 11.3536 8.11531 11.3536C7.134 11.3536 6.33111 12.1565 6.33111 13.1378C6.33111 14.1191 7.134 14.922 8.11531 14.922Z" fill="#78909C"/>
                        </svg>

                        <input type="password" name="confirm-password" id="confirm-password"
                         formControlName="confirmPassword"
                         placeholder="Confirm Password"
                         autocomplete="new-password"
                         [type]="confirmPasswordVisible ? 'text': 'password'">

                        @if (confirmPasswordVisible) {
                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none" (click)="togglePasswordVisibility('confirmPassword')">
                                <path d="M10.7048 3.79138C4.01414 3.79138 1.33789 10.705 1.33789 10.705C1.33789 10.705 4.01414 17.6187 10.7048 17.6187C17.3954 17.6187 20.0716 10.705 20.0716 10.705C20.0716 10.705 17.3954 3.79138 10.7048 3.79138Z" stroke="#252C32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M10.7051 13.3812C12.1831 13.3812 13.3813 12.183 13.3813 10.705C13.3813 9.22695 12.1831 8.02875 10.7051 8.02875C9.22701 8.02875 8.02881 9.22695 8.02881 10.705C8.02881 12.183 9.22701 13.3812 10.7051 13.3812Z" stroke="#252C32" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        }
                        @else {
                            <!-- svg -->
                            <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none" (click)="togglePasswordVisibility('confirmPassword')">
                                <path d="M4.30078 4.24023L17.4258 18.6777" stroke="black" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M13.0696 13.8875C12.4674 14.4391 11.6796 14.7437 10.8629 14.7406C10.2007 14.7406 9.55392 14.5401 9.00772 14.1656C8.46151 13.791 8.04142 13.26 7.80267 12.6423C7.56392 12.0245 7.51768 11.349 7.67004 10.7045C7.8224 10.06 8.16621 9.4767 8.65629 9.03125" stroke="black" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M6.43359 6.58594C3.08672 8.27578 1.67578 11.4586 1.67578 11.4586C1.67578 11.4586 4.30078 17.3648 10.8633 17.3648C12.401 17.3774 13.9196 17.023 15.293 16.3312" stroke="black" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M17.4758 14.8305C19.2641 13.2309 20.0516 11.459 20.0516 11.459C20.0516 11.459 17.4266 5.55275 10.8641 5.55275C10.2951 5.55163 9.72713 5.59828 9.16602 5.69221" stroke="black" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M11.4785 8.23438C12.1763 8.36659 12.8122 8.72219 13.2901 9.2475C13.7681 9.77281 14.0622 10.4393 14.1281 11.1465" stroke="black" stroke-opacity="0.6" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        }

                    </div>

                    @if (changePasswordForm.errors?.['mismatch'] && 
                    (changePasswordForm.get('confirmPassword')?.touched || 
                     changePasswordForm.get('confirmPassword')?.dirty)) {
                       <small class="error">Password mismatch</small>
                   }
                </div>
            </div>

            <!-- form actions -->
             <div class="form-actions">
                <button type="submit" class="cancel-btn">Cancel</button>
                <button type="submit" class="save-changes-btn" [disabled]="changePasswordForm.invalid">Saves Changes</button>
             </div>
        </form>
    </div>
</div>