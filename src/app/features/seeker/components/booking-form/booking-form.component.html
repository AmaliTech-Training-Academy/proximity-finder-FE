<form class="booking-form">
  <div class="start">
    <div class="start-date">
      <label for="startDate">Start Date</label>
      <p-calendar placeholder="dd/mm/yyyy" formControlName="startDate" />
    </div>
    <div class="start-time">
      <label for="startTime">Start Time</label>
      <p-calendar
        placeholder="00:00"
        inputId="calendar-timeonly"
        [timeOnly]="true"
      />
    </div>
  </div>

  <div class="end">
    <div class="end-date">
      <label for="endDate">End Date</label>
      <p-calendar placeholder="dd/mm/yyyy" formControlName="endDate" />
    </div>
    <div class="end-time">
      <label for="endTime">End Time</label>
      <p-calendar
        placeholder="00:00"
        inputId="calendar-timeonly"
        [timeOnly]="true"
      />
    </div>
  </div>

  <div class="description">
    <label for="description">Project Description</label>
    <p-editor
      formControlName="projectDescription"
      [style]="{ height: '320px' }"
      [(ngModel)]="projectDescriptionText"
    >
      <ng-template pTemplate="header">
        <span class="ql-formats">
          <button type="button" class="ql-bold" aria-label="Bold"></button>
          <button type="button" class="ql-italic" aria-label="Italic"></button>
          <button
            type="button"
            class="ql-underline"
            aria-label="Underline"
          ></button>
          <button
            type="button"
            class="ql-header"
            value="1"
            aria-label="Heading 1"
          ></button>
          <button
            type="button"
            class="ql-header"
            value="2"
            aria-label="Heading 2"
          ></button>
          <button
            type="button"
            class="ql-header"
            value="3"
            aria-label="Heading 3"
          ></button>
          <button
            type="button"
            class="ql-blockquote"
            aria-label="Block Quote"
          ></button>
          <button type="button" class="ql-link" aria-label="Link"></button>
          <!-- <button type="button" class="ql-image" aria-label="Image"></button> -->
          <button
            type="button"
            class="ql-list"
            value="bullet"
            aria-label="Bullet List"
          ></button>
          <button
            type="button"
            class="ql-list"
            value="ordered"
            aria-label="Ordered List"
          ></button>
        </span>
      </ng-template>
    </p-editor>

    @if (isLoading) {
    <div class="loader">
      Generating description
      <app-ai-loader />
    </div>
    } @else {
    <button type="button" class="generate" (click)="showAIDialog()">
      Generate with AI
      <svg
        width="18"
        height="18"
        viewBox="0 0 18 18"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M6.8296 4.086C7.2781 2.7735 9.0916 2.73375 9.62335 3.96675L9.66835 4.08675L10.2736 5.85675C10.4123 6.26267 10.6365 6.63413 10.9309 6.94607C11.2254 7.258 11.5833 7.50316 11.9806 7.665L12.1433 7.72575L13.9133 8.33025C15.2258 8.77875 15.2656 10.5922 14.0333 11.124L13.9133 11.169L12.1433 11.7743C11.7373 11.9129 11.3657 12.137 11.0536 12.4314C10.7415 12.7259 10.4963 13.0839 10.3343 13.4813L10.2736 13.6432L9.6691 15.414C9.2206 16.7265 7.4071 16.7662 6.8761 15.534L6.8296 15.414L6.2251 13.644C6.08648 13.2379 5.86237 12.8663 5.5679 12.5543C5.27343 12.2422 4.91544 11.9969 4.5181 11.835L4.3561 11.7743L2.5861 11.1698C1.27285 10.7212 1.2331 8.90775 2.4661 8.37675L2.5861 8.33025L4.3561 7.72575C4.76202 7.58704 5.13348 7.3629 5.44541 7.06843C5.75735 6.77396 6.0025 6.41602 6.16435 6.01875L6.2251 5.85675L6.8296 4.086ZM14.2493 1.5C14.3897 1.5 14.5272 1.53936 14.6462 1.6136C14.7653 1.68785 14.8611 1.794 14.9228 1.92L14.9588 2.00775L15.2213 2.77725L15.9916 3.03975C16.1322 3.08752 16.2555 3.17596 16.3458 3.29386C16.4361 3.41176 16.4893 3.55381 16.4988 3.70202C16.5083 3.85022 16.4736 3.9979 16.399 4.12634C16.3245 4.25478 16.2135 4.3582 16.0801 4.4235L15.9916 4.4595L15.2221 4.722L14.9596 5.49225C14.9117 5.63282 14.8232 5.75602 14.7053 5.84624C14.5873 5.93647 14.4453 5.98964 14.2971 5.99904C14.1489 6.00844 14.0012 5.97363 13.8728 5.89903C13.7444 5.82443 13.6411 5.7134 13.5758 5.58L13.5398 5.49225L13.2773 4.72275L12.5071 4.46025C12.3665 4.41248 12.2432 4.32404 12.1529 4.20614C12.0626 4.08824 12.0094 3.94619 11.9999 3.79798C11.9904 3.64978 12.0251 3.5021 12.0997 3.37366C12.1742 3.24522 12.2852 3.1418 12.4186 3.0765L12.5071 3.0405L13.2766 2.778L13.5391 2.00775C13.5897 1.85957 13.6854 1.73093 13.8127 1.63987C13.9401 1.54882 14.0928 1.49991 14.2493 1.5Z"
          fill="#98A2B3"
        />
      </svg>
    </button>
    }
  </div>
  <div class="buttons">
    <p-button label="Cancel" severity="secondary" (onClick)="closeDialog()" />
    <p-button type="submit" label="Submit" />
  </div>
</form>

<p-dialog
  header="Generate Description"
  [modal]="false"
  [(visible)]="isAIDialogVisible"
  [style]="{ width: '30rem' }"
  [draggable]="false"
  [resizable]="false"
>
  <div class="generateForm">
    <label for="keywords">Features and Keywords</label>
    <textarea
      rows="5"
      cols="30"
      pInputTextarea
      [(ngModel)]="prompt"
      placeholder="Enter a description for your project"
    ></textarea>
  </div>
  <div class="buttons">
    <p-button type="submit" label="Generate" (onClick)="onGenerate()" />
  </div>
</p-dialog>
