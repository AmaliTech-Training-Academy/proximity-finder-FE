<div class="container">
    <p>Pro Accounts</p>

    <div class="table">
        <p-table
          [paginator]="true"
          [rows]="10"
          [value]="proAccounts"
          [tableStyle]="{ 'min-width': '50rem' }"
        >
          <ng-template pTemplate="header">
            <tr>
              <th>BUSINESS OWNER</th>
              <th>BUSINESS NAME</th>
              <th>EMAIL</th>
              <th>LOCATION</th>
              <th>VERIFICATION</th>
              <th>STATUS</th>
              <th>ACTION</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-proAccounts>
            <tr routerLink="/admin/dashboard/pro-accounts/details">
              <td>{{ proAccounts.businessOwner }}</td>
              <td>{{ proAccounts.businessName | slice:0:15 }}...</td>
              <td>{{ proAccounts.email | slice:0:10 }}...</td>
              <td>{{ proAccounts.location | slice:0:10}}...</td>
              <td>{{ proAccounts.verification}}</td>
              <td>

              <div class="action-container" (click)="$event.stopPropagation()">
                  <span class="status-label" [ngClass]="proAccounts.status | lowercase" (click)="toggleMenu(proAccounts)">
                    <i class="status-icon"></i>
                    {{ proAccounts.status }}
                    <i class="pi pi-chevron-down"></i>
                  </span>

                  @if (activeAccount === proAccounts) {
                    <div class="menu">
                      @for (status of statuses; track $index) {
                        <span class="status-label" [ngClass]="statusMapping[status] | lowercase" (click)="updateStatus(proAccounts, status)">
                          <i class="status-icon"></i>
                          {{ status }}
                        </span>
                      }
                    </div>
                  }
              </div>

            </td>
            <td>
              <div class="action-container" (click)="$event.stopPropagation()">
                <i class="pi pi-ellipsis-v" style="color: rgba(119, 135, 143, 1)" (click)="toggleAction(proAccounts)"></i>

                @if(showAction[proAccounts.email]){
                  <div class="menu">
                    <div class="action" (click)="openDialog()">
                      <i class="pi pi-trash"></i>
                      <p>Delete</p>
                    </div>
                    <a routerLink="/admin/dashboard/pro-accounts/details"
                      routerLinkActive="active-link" class="action">
                      <i class="pi pi-pencil"></i>
                      <p>View</p>
                    </a>
                  </div>
                }
                
              </div>
            </td>
            </tr>
          </ng-template>
        </p-table>
    </div>
</div>
  