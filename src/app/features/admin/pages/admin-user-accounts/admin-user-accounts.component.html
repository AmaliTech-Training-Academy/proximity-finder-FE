<div class="container">
    <p>User Accounts</p>

    <div class="table">
        <p-table
          [paginator]="true"
          [rows]="10"
          [value]="allUsers"
          [tableStyle]="{ 'min-width': '50rem' }"
        >
          <ng-template pTemplate="header">
            <tr>
              <th>USER NAME</th>
              <th>EMAIL</th>
              <th>CONTACT</th>
              <th>VERIFICATION</th>
              <th>ACCOUNT STATUS</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-proAccount>
            <tr>
              <td>{{ proAccount.userName }}</td>
              <td>{{ proAccount.email | slice:0:15 }}...</td>
              <td>{{ proAccount.mobileNumber }}</td>
              <td>{{ proAccount.enabled === true ? 'Yes' : 'No'}}</td>
              <td>

              <div class="action-container" (click)="$event.stopPropagation()">
                  <span class="status-label" [ngClass]="proAccount.status | lowercase" (click)="toggleMenu(proAccount)">
                    <i class="status-icon"></i>
                    {{ proAccount.status }}
                    <i class="pi pi-chevron-down"></i>
                  </span>

                  @if (activeAccount === proAccount) {
                    <div class="menu">
                      @for (status of statuses; track $index) {
                        <span class="status-label" [ngClass]="statusMapping[status] | lowercase" (click)="updateStatus(proAccount, status)">
                          <i class="status-icon"></i>
                          {{ status }}
                        </span>
                      }
                    </div>
                  }
              </div>

            </td>
            
            </tr>
          </ng-template>
        </p-table>
    </div>
</div>
  